# Streamlit 製 Abaqus 入力ファイル生成アプリ

## 1. アプリ概要
- テンプレートとなる Abaqus の `.inp` ファイルをアップロードし、任意のテキストを置換することで複数の入力ファイルを自動生成する Streamlit アプリです。
- 置換対象と置換後テキストの候補を複数登録し、全組み合わせから必要なものだけを選んで生成できます。

## 2. 実行環境
- Python 3.x
- Streamlit

## 3. セットアップ手順
1. 仮想環境を作成します。
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Windows の場合は .venv\Scripts\activate
   ```
2. 依存パッケージをインストールします。
   ```bash
   pip install streamlit
   ```

## 4. 起動方法
```bash
streamlit run scripts/app1-input.py
```

## 5. 使用手順
1. **(Ⅰ) テンプレートとなる inp ファイルのアップロード**
   - Streamlit の画面から `.inp` ファイルをアップロードします。
   - ファイルはアプリ内で文字列として保持され、後続の置換処理に利用されます。
2. **(Ⅱ) 置換対象の入力**
   - `st.text_area` で置換したいテキストを入力します。デフォルトで 1 つの入力欄が表示され、「追加」ボタンで複数の置換対象を追加できます。
   - `st.radio` で「完全一致／部分一致」を切り替えられます（デフォルトは完全一致）。
   - 一致箇所が複数ある場合はすべて置換されます。
3. **(Ⅲ) 置換後テキストの入力**
   - 各置換対象に対して、`st.text_area` で置換後テキストの候補を入力します。
   - 「追加」ボタンで候補を増やし、①、②、③…のように番号を振って管理します。
4. **(Ⅳ) 置換の組み合わせ設定と出力**
   - 置換対象と置換後テキスト候補の全組み合わせが自動生成され、`st.dataframe` に一覧表示されます。
   - 各組み合わせの左側のチェックボックスで生成対象を選択し、「Generate inputs」ボタンを押すと選択した `.inp` ファイルが出力されます。

## 6. 出力仕様
- 生成されたファイルはアップロードしたテンプレートファイルと同じディレクトリに保存されます。
- ファイル名は `<テンプレート名>_(組み合わせ番号).inp` の形式です。
  - 例：`template_(1-1).inp`、`template_(1-2).inp`、`template_(2-1-3).inp`

## 7. 注意事項
- 置換対象がテンプレート内に必ず存在することを事前に確認してください。
- 完全一致／部分一致の検索方式を切り替え可能です。
- 一致箇所が複数ある場合はすべて置換されます。
